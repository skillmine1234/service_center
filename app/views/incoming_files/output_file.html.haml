.form-horizontal.show_form
  .form-main-with-color{:style=>'background-color: #F1F2F8; margin: 1%;'}
    #form-details
      %h3 Output File Details
      %br
      %table.table.no-border{:style=>"table-layout: fixed; width: 100%"}
        %tr
          %td.label Incoming File
          %td.value
            = link_to @fm_output_file.incoming_file.try(:name), @fm_output_file.incoming_file
          %td
        %tr
          %td.label Step Name
          %td
            = @fm_output_file.step_name
          %td
        %tr
          %td.label File Name
          %td
            = @fm_output_file.file_name
            &nbsp;
            - if (!ENV['CONFIG_SCP_IIB_FILE_MGR'].nil? or !ENV['CONFIG_SCP_IIB_FILE_MGR'].empty?) and @fm_output_file.incoming_file.status == 'C'
              = "("
              = link_to 'Download', download_file_incoming_file_path(@fm_output_file.incoming_file, file_id: @fm_output_file.id, :flag => 'output_file', :download => true)
              = "/"
              = link_to 'View', download_file_incoming_file_path(@fm_output_file.incoming_file, file_id: @fm_output_file.id, :flag => 'output_file', :view => true)
              = ")"
        %tr
          %td.label File Path
          %td
            = @fm_output_file.file_path
          %td
        %tr
          %td.label Started At
          %td
            = @fm_output_file.started_at.try(:strftime, "%d/%m/%Y %I:%M%p") rescue ""
          %td
        %tr
          %td.label Ended At
          %td
            = @fm_output_file.ended_at.try(:strftime, "%d/%m/%Y %I:%M%p") rescue ""
          %td
        %tr
          %td.label Status
          %td.value
            = @fm_output_file.status_code
          %td.value
            - if @fm_output_file.status_code == "FAILED"
              = link_to "Fault Text", "#", :class => 'fault-link', :href => "javascript:void()", :style => "font-weight:100"
            - if @fm_output_file.fault_bitstream.present?
              = '|'
              = link_to "Fault Bitstream", "#", :class => 'val-fault-link', :href => "javascript:void()", data: { fault: @fm_output_file.fault_bitstream}

#faultText.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-header
    %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} ×
    %h3 Fault Text
    #error_message{:style => 'color:red'}
  .modal-body{:style => "max-height:450px;"}
    .demo-area
    %pre#fault_text{:style => 'word-wrap: break-word'}
    %table.table.no-border
      %tr
        %td.label Fault Code:
        %td= @fm_output_file.fault_code
      %tr
        %td.label Fault SubCode:
        %td= @fm_output_file.fault_subcode
      %tr
        %td.label Fault Reason:
        %td= @fm_output_file.fault_reason
#faultLink.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-header
    %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} ×
    %h3 Fault
    #error_message{:style => 'color:red'}
  .modal-body{:style => "max-height:450px;"}
    .demo-area
      %button#d_clip_button3.my_clip_button3{"data-clipboard-target" => "fault_xml"}
        %b Copy To Clipboard...
    %pre#fault_xml{:style => 'word-wrap: break-word'}
      .fault{:style => 'word-wrap: break-word'}